import{j as n,F as E,a as e,r as o,b as j}from"./index-90f3decc.js";function T(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=Math.random()*16|0,l=t=="x"?a:a&3|8;return l.toString(16)})}const L=t=>n(E,{children:[e("div",{children:e("p",{className:"text-left text-sm pl-1 pb-1 text-dark font-semibold",children:t.label})}),e("textarea",{...t,rows:t.rows,className:"border w-full p-4 outline-none border rounded text-sm"})]}),V=t=>n(E,{children:[t.label!==void 0?e("div",{className:"pl-1 pb-1 text-dark font-semibold text-sm",children:t.label}):null,e("input",{...t,className:"h-11 w-full px-4 outline-none border rounded text-sm"})]}),A=({width:t,height:a,color:l})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||"17.719",height:a||"17.801",viewBox:"0 0 17.719 17.801",children:e("g",{id:"cancel-icon",transform:"translate(0 -0.016)",children:e("g",{id:"Group_91","data-name":"Group 91",transform:"translate(0 0.016)",children:e("path",{id:"Path_23","data-name":"Path 23",d:"M10.811,8.917,17.436,2.26a.979.979,0,0,0,0-1.377L16.855.3a.968.968,0,0,0-1.371,0L8.86,6.956,2.235.3A.968.968,0,0,0,.864.3L.284.883a.978.978,0,0,0,0,1.377L6.909,8.917.284,15.573a.98.98,0,0,0,0,1.377l.581.583a.968.968,0,0,0,1.37,0L8.86,10.877l6.625,6.656a.959.959,0,0,0,.685.284h0a.959.959,0,0,0,.685-.284l.581-.583a.98.98,0,0,0,0-1.377Z",transform:"translate(0 -0.016)",fill:l||"#002eac"})})})}),_=({setIsEditModal:t,setIsAddModal:a,setTodos:l,todos:g,title:h,selectedId:f})=>{var p,S;const[r,b]=o.useState(""),[u,v]=o.useState(""),x=g.filter(m=>m.id===f);function w(){if(h==="Add Todo"){const m={id:T(),todoName:r,todoDescription:u,comments:[],isSelected:!1,isExpanded:!1};l([...g,m])}else console.log("11"),l(m=>[...m.map(y=>y.id===f?{...y,todoName:r,todoDescription:u}:y)]);a!==void 0&&a(!1),t!==void 0&&t(!1)}function s(){if(r.length<1||u.length<1)return!0}return o.useEffect(()=>{var m,y,C,i;h!=="Add Todo"&&(b((m=x[0])!=null&&m.todoName?(y=x[0])==null?void 0:y.todoName:""),v((C=x[0])!=null&&C.todoDescription?(i=x[0])==null?void 0:i.todoDescription:""))},[]),j.createPortal(n(E,{children:[e("div",{id:"staticModal",className:"fixed top-0 left-0 right-0 z-40 md:inset-0 h-modal md:h-full w-full flex items-center justify-center",children:n("div",{className:"bg-white mt-2 rounded w-[50vw] rounded-md",children:[n("div",{className:"bg-tertiary h-10 flex justify-between items-center px-4 rounded-tl-md rounded-tr-md",children:[e("span",{className:"text-white font-semibold",children:h}),e("span",{onClick:()=>{a!==void 0&&a(!1),t!==void 0&&t(!1)},className:"cursor-pointer",children:e(A,{height:"12px",color:"#ffffff"})})]}),n("div",{className:"w-full p-4 flex flex-col gap-4",children:[e("div",{children:e(V,{label:"Todo Name",type:"text",onChange:m=>b(m.currentTarget.value),defaultValue:(p=x[0])!=null&&p.todoName?x[0].todoName:""})}),e("div",{children:e(L,{label:"Description",rows:4,onChange:m=>v(m.currentTarget.value),defaultValue:(S=x[0])!=null&&S.todoDescription?x[0].todoDescription:""})}),n("div",{className:"flex w-full justify-end gap-4 text-sm ",children:[e("button",{className:"py-2 px-4 border rounded",onClick:()=>{a!==void 0&&a(!1),t!==void 0&&t(!1)},children:"Cancel"}),e("button",{className:`py-2 px-4  rounded text-white ${s()?"bg-light opacity-50":"bg-tertiary"}`,onClick:()=>w(),type:"button",disabled:s(),children:"Apply"})]})]})]})}),e("div",{className:"fixed top-0 left-0 right-0 bottom-0 bg-smoked"})]}),document.body)},D=({index:t,todoItem:a,setIsAddComment:l,setTodos:g,todos:h,title:f,selectedComment:r,selectedId:b})=>{const[u,v]=o.useState("");function x(){if(f!=="Edit Comment"){const w=[...a.comments];w.push({id:T(),comment:u});const s=h.map((p,S)=>t!==S?p:{...p,comments:w});g(s)}else{const w=h.map(s=>r!=null&&r.id?s.id!==b?s:{...s,comments:s.comments.map(p=>p.id!==r.id?p:{...p,comment:u})}:s);g(w)}l!==void 0&&l(!1)}return o.useEffect(()=>{r!==void 0&&v(r.comment)},[r]),j.createPortal(n(E,{children:[e("div",{id:"staticModal",className:"fixed top-0 left-0 right-0 z-40 md:inset-0 h-modal md:h-full w-full flex items-center justify-center",children:n("div",{className:"bg-white mt-2 rounded w-[50vw] rounded-md",children:[n("div",{className:"bg-tertiary h-10 flex justify-between items-center px-4 rounded-tl-md rounded-tr-md",children:[e("span",{className:"text-white font-semibold",children:e("p",{children:"Add Comment"})}),e("span",{onClick:()=>{l!==void 0&&l(!1)},className:"cursor-pointer",children:e(A,{height:"12px",color:"#ffffff"})})]}),n("div",{className:"w-full p-4",children:[e("div",{className:"py-4",children:e(L,{label:"Comment",rows:4,defaultValue:f==="Edit Comment"&&r!=null&&r.comment?r==null?void 0:r.comment:"",onChange:w=>v(w.currentTarget.value)})}),n("div",{className:"flex w-full justify-end gap-4 text-sm ",children:[e("button",{className:"py-2 px-4 border rounded",onClick:()=>{l!==void 0&&l(!1)},children:"Cancel"}),e("button",{className:`py-2 px-4  rounded text-white ${u.length>0?"bg-tertiary":"bg-light opacity-50"}`,onClick:()=>x(),type:"button",disabled:u.length<1,children:"Apply"})]})]})]})}),e("div",{className:"fixed top-0 left-0 right-0 bottom-0 bg-smoked"})]}),document.body)},H=({width:t,height:a,color:l})=>n("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",width:t||"14px",height:a||"14px",viewBox:"0 0 330 330",fill:"gray",children:[e("path",{id:"XMLID_225_",d:`M325.607,79.393c-5.857-5.857-15.355-5.858-21.213,0.001l-139.39,139.393L25.607,79.393\r
            c-5.857-5.857-15.355-5.858-21.213,0.001c-5.858,5.858-5.858,15.355,0,21.213l150.004,150c2.813,2.813,6.628,4.393,10.606,4.393\r
            s7.794-1.581,10.606-4.394l149.996-150C331.465,94.749,331.465,85.251,325.607,79.393z`}),e("g",{}),e("g",{}),e("g",{}),e("g",{}),e("g",{}),e("g",{}),e("g",{}),e("g",{}),e("g",{}),e("g",{}),e("g",{}),e("g",{}),e("g",{}),e("g",{}),e("g",{})]}),P=({width:t,height:a,color:l})=>n("svg",{id:"kebab-option-icon",xmlns:"http://www.w3.org/2000/svg",width:t,height:a,viewBox:"0 0 7.673 27.673",children:[e("circle",{id:"Ellipse_5","data-name":"Ellipse 5",cx:"3.837",cy:"3.837",r:"3.837",fill:l??"#9a9a9a"}),e("circle",{id:"Ellipse_6","data-name":"Ellipse 6",cx:"3.837",cy:"3.837",r:"3.837",transform:"translate(0 10)",fill:l??"#9a9a9a"}),e("circle",{id:"Ellipse_7","data-name":"Ellipse 7",cx:"3.837",cy:"3.837",r:"3.837",transform:"translate(0 20)",fill:l??"#9a9a9a"})]}),z=({width:t,height:a,color:l})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:t??"22.246",height:a??"21.246",viewBox:"0 0 22.246 21.246",children:e("path",{id:"add-icon",d:"M22.246,9.923H11.856V0H10.39V9.923H0v1.4H10.39v9.923h1.467V11.323h10.39Z",fill:l??"#ffffff"})}),B=({todos:t,isEditModal:a,setTodos:l,setIsEditModal:g,onDelete:h})=>{const f=o.useRef(null),[r,b]=o.useState(!1),[u,v]=o.useState(!1),[x,w]=o.useState({comment:"",id:""}),[s,p]=o.useState("");function S(i){const c=t.map((d,N)=>(p(t[i].id),N===i?{...d,isSelected:!d.isSelected}:{...d,isSelected:!1}));l(c)}function m(i){p(t[i].id);const c=t.map((d,N)=>N===i?{...d,isExpanded:!d.isExpanded}:{...d,isExpanded:!1});l(c)}function y(i,c){const d=t[c].comments.filter(k=>k.id!==i),N=t.map(k=>k.id===t[c].id?{...k,comments:d}:k);l(N)}function C(i){w(i),v(c=>!c)}return o.useEffect(()=>{console.log(t);let i=c=>{f.current!==null&&(f.current.contains(c.target)||setTimeout(()=>{l(d=>[...d.map(N=>N.id===s?{...N,isSelected:!1}:N)])},150))};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[s]),e("div",{className:"w-full border mt-10",children:n("table",{className:"w-full",children:[e("thead",{className:"bg-secondary text-white",children:n("tr",{className:"h-12 border-b ",children:[e("th",{colSpan:3,className:"text-start pl-4",children:"Todo"}),e("th",{colSpan:8,className:"text-start pl-4",children:"Description"}),e("th",{colSpan:1,children:"Action"})]})}),n("tbody",{children:[t.map((i,c)=>n(o.Fragment,{children:[n("tr",{className:"h-10 border-b",children:[e("td",{colSpan:3,className:"border-t border-b pl-4 text-dark font-semibold",children:i.todoName}),e("td",{colSpan:8,className:"pl-4 text-dark font-semibold",children:i.todoDescription}),n("td",{colSpan:1,className:"px-2 w-24 text-center relative",children:[n("div",{className:"flex justify-center gap-4",children:[e("button",{type:"button",className:"p-2",onClick:()=>m(c),children:e("span",{className:`transition ease-in-out duration-500 rotate-180 ${i.isExpanded?"rotate-180":""}`,children:e(H,{})})}),e("button",{type:"button",className:"p-2",onClick:()=>S(c),children:e(P,{width:"5px"})})]}),i.isSelected?n("div",{className:"bg-white absolute top-0 right-10 flex flex-col rounded-sm text-sm shadow-xl z-10 ",ref:f,children:[e("button",{className:"px-4 py-1 font-semibold rounded-tl-sm rounded-tr-sm hover:bg-tertiary hover:text-white",onClick:()=>g(d=>!d),children:"Edit"}),e("hr",{}),e("button",{className:"px-4 py-1 font-semibold rounded-bl-sm rounded-br-sm hover:bg-tertiary hover:text-white",onClick:()=>h(i.id),children:"Delete"})]}):null]})]}),i.isExpanded?e("tr",{className:"bg-white",children:n("td",{colSpan:12,className:" h-full px-10 pb-4",children:[n("div",{className:"flex justify-between h-14 items-center text-sm",children:[e("p",{className:"font-semibold",children:"Comments"}),n("button",{className:"text-tertiary font-semibold  flex items-center gap-2",onClick:()=>b(d=>!d),children:[e(z,{color:"#002eac",height:"14px"})," Add Comments"]})]}),e("ol",{style:{listStyleType:"decimal"},className:"flex flex-col gap-2",children:e(E,{children:i.comments.map((d,N)=>n("div",{children:[e("hr",{}),n("div",{className:"flex justify-between items-center",children:[e("li",{className:"ml-4 mt-2",children:d.comment}),n("div",{className:"flex pr-4 gap-4 font-semibold pt-1",children:[e("button",{className:"text-sm text-red-500 hover:text-black",onClick:()=>y(d.id,c),children:"delete"}),e("button",{className:"text-sm text-tertiary hover:text-black",onClick:()=>C(d),children:"edit"})]})]}),u?e(D,{title:"Edit Comment",selectedComment:x,index:c,todoItem:i,setIsAddComment:v,isAddComment:u,setTodos:l,todos:t,selectedId:s}):null]},d.id))})}),r?e(D,{index:c,todoItem:i,setIsAddComment:b,isAddComment:r,setTodos:l,todos:t,selectedId:s}):null]})},i.id):null,a?e(_,{title:"Edit Todo",setIsEditModal:g,setTodos:l,todos:t,selectedId:s}):null]},i.id)),t.length===0?e("tr",{className:"h-10 border-b",children:e("td",{colSpan:12,className:"border-t border-b px-2 text-dark font-semibold h-[20rem] text-center",children:e("p",{children:"No list of todos available"})})}):null]})]})})},G=()=>{const[t,a]=o.useState(!1),[l,g]=o.useState(!1),[h,f]=o.useState([]);function r(b){const u=h.filter(v=>v.id!==b);f(u)}return o.useEffect(()=>{},[]),n("div",{className:"pt-20",children:[n("div",{className:"flex justify-between",children:[e("div",{className:"text-3xl font-bold",children:"Todos"}),e("button",{className:"px-4 py-2 bg-secondary rounded-md text-white font-semibold",onClick:()=>a(b=>!b),children:"Add Todo"})]}),e(B,{todos:h,setTodos:f,setIsEditModal:g,isEditModal:l,onDelete:r}),t?e(_,{title:"Add Todo",setIsAddModal:a,setTodos:f,todos:h}):null]})};export{G as default};
